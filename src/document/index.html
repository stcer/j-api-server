<!doctype html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Home api document</title>
    <!-- 新 Bootstrap 核心 CSS 文件 -->
    <link rel="stylesheet" href="//cdn.bootcss.com/bootstrap/3.3.5/css/bootstrap.min.css">
    <style>
    .method-list{
        line-height: 200%;
        font-size: 14px;
    }

    .method-list li{
        border-bottom: 1px solid #f1f1f1;
        padding-top: 6px;
        padding-bottom: 6px;
    }

    .method-list .badge{
        float: right;
        cursor: pointer;
    }

    .del{
        text-decoration: line-through;
    }
    </style>
</head>
<body style="padding-top: 70px;">

<nav class="navbar navbar-fixed-top navbar-inverse">
    <div class="container">
        <div class="navbar-header">
            <a class="navbar-brand" href="?">Api document</a>
        </div>
    </div>
</nav>

<div class="container" style="margin-bottom: 50px;">
    <div class="row row-offcanvas row-offcanvas-right" id="main">
        <!-- web com !-->
        <test-form v-bind:api="api" v-bind:params="initParams" v-bind:func="currentFunc"></test-form>
        <init-params v-bind:params="initParams" v-bind:on-init="onInit"></init-params>
        <!-- end web com !-->

        <!-- left !-->
        <div class="col-xs-12 col-sm-9 docs-main">
            <div v-if="welcome">
                <welcome></welcome>
            </div>

            <div v-if="api">
                <api v-bind:name="api" v-bind:params="initParams" v-bind:on-test="onTest"></api>
            </div>
        </div>
        <!--end left !-->

        <!-- right !-->
        <!-- api list !-->
        <div class="col-xs-6 col-sm-3 sidebar-offcanvas docs-sidebar">
            <h4>Api list</h4>

            <div class="list-group">
                <a v-for="name in apis"
                   href="#none"
                   v-on:click="show(name)"
                   class="list-group-item">{{name}}</a>
            </div>
        </div>
        <!-- end right !-->
    </div>

    <hr />
    <footer>
        <p>&copy; 成都九正科技 2015 - 2015 </p>
    </footer>
</div>


<!-- jQuery文件。务必在bootstrap.min.js 之前引入 -->
<script type="text/javascript" src="//cdn.bootcss.com/jquery/2.1.4/jquery.min.js"></script>
<script type="text/javascript" src="//cdn.bootcss.com/bootstrap/3.3.5/js/bootstrap.min.js"></script>
<script type="text/javascript" src="//cdn.bootcss.com/vue/1.0.0-beta.3/vue.min.js"></script>

<script src="js/papi.js?v=19" type="text/javascript"></script>
<script type="text/javascript">
    PApi.get('document.testUrl', {}).done(function(url){
        PApi.testUrlPattern = url;
    });
</script>

<script type="x-template" id="apiTemplate">
    <h1>{{name}}</h1>
    <pre v-if="hasSummary">{{summary}}</pre>
    <table class="table table-hover">
        <thead>
        <tr>
            <th width="80%">方法名</th>
            <th width="20%">测试</th>
        </tr>
        </thead>
        <tbody>
        <tr v-for="func in funcs" v-on:click="test($index)">
            <td v-on:click="toggle($index)">
                <span style="color: #000">{{func.func}}</span>
                <div style="margin:15px 0 0 50px; color: #666">
                    {{func.desc}}
                    <pre style="border: none" v-show="func.isShow">{{func.doc|annotation}}</pre>
                </div>
            </td>
            <td data-toggle="modal" data-target="#myModal">测试接口</td>
        </tr>
        </tbody>
    </table>
</script>
<script src="js/api.js"></script>

<!-- Modal -->
<script type="x-template" id="TestFormTemplate">
<div class="modal fade" id="myModal"
     tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
                <h4 class="modal-title" id="myModalLabel">接口测试</h4>
            </div>
            <div class="modal-body">
                <h3>{{api}}.{{func.name}}</h3>
                <pre v-if="hasDoc">{{func.doc}}</pre>
                <form>
                    <div class="form-group" v-for="arg in func.args">
                        <label for="exampleInputEmail1">{{arg.name}}</label>
                        <input type="text" class="form-control" v-model="arg.value"
                               placeholder="{{arg.value != undefined ? arg.value : ''}}">
                    </div>
                </form>
                <strong>请求地址</strong>
                {{url}}
            </div>
            <div class="modal-footer">
                <a href="{{url}}" target="_blank" class="btn btn-primary">Submit</a>
            </div>
        </div>
    </div>
</div>
</script>
<script src="js/test.js"></script>

<script type="x-template" id="InitPramsTemplate">
<div class="modal fade" id="modalInitPrams"
     tabindex="-1" role="dialog"  aria-labelledby="myModalLabel">
    <div class="modal-dialog" role="document">
    <div class="modal-content">
        <div class="modal-header">
            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                <span aria-hidden="true">&times;</span>
            </button>
            <h4 class="modal-title" id="myModalLabel">初始化参数</h4>
        </div>
        <div class="modal-body">
            <h1>{{api}}</h1>
            <pre v-if="hasSummary">{{summary}}</pre>
            <form>
                <div class="form-group" v-for="arg in params">
                    <label for="exampleInputEmail1">{{arg.name}} / {{arg.desc}}</label>
                    <input type="text" class="form-control" v-model="arg.value"
                           placeholder="{{arg.value != undefined ? arg.value : ''}}">
                </div>
            </form>
        </div>
        <div class="modal-footer">
            <button class="btn btn-primary" v-on:click="submit()">Submit</button>
        </div>
    </div>
    </div>
</div>
</script>
<script src="js/ini_params.js"></script>

<script type="x-template" id="welcomeTemplate">
    <div class="jumbotron">
        <h1>Hello, api</h1>
        <p>通过构造接口组件, 达到逻辑代码重用, 实现前后端代码分层, 进而实现开发者、部署分离,
            用于快速高效的实现可扩展的应用代码</p>
    </div>


    <div class="row">
        <div class="col-lg-6">
            <h3>Features</h3>
            <ul class="method-list">
                <li>文档根据接口类注释代码动态实时生成</li>
                <li>提供接口参数测试功能</li>
                <li>多种调用(本地、远程、js)接口示例</li>
                <li>App front = Action + template + api(self, public, remote)?</li>
            </ul>
            <h3>Problem?</h3>
            <ul class="method-list">
                <li>接口返回类型，必须是php标准类型，否则无法找到原型</li>
            </ul>
        </div>
        <div class="col-lg-6">
            <h3>Todos</h3>
            <ul class="method-list">
                <li class="del">接口测试功能</li>
                <li>接口名称显示在列表</li>
                <li class="del">默认隐藏接口文档</li>
                <li>Web tools, 根据注解生动生成sql, models, action, views</li>
                <li>批量提交、异步提交请求</li>
                <li>Api接口自动测试</li>
                <li>消息中心，处理管理、监控</li>
                <li>单点登录</li>
                <li>授权服务</li>
                <li>图片管理服务</li>
                <li>文件管理服务</li>
                <li>app管理中心</li>
                <li>jdb\table ORM</li>
                <li>jFrame\plugs(login et.)</li>
            </ul>
        </div>
    </div>
</script>
<script src="js/main.js"></script>

</body>
</html>
